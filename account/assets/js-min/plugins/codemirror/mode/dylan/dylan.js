!function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)}(function(a){"use strict";a.defineMode("dylan",function(a){function b(a,b,c){return b.tokenize=c,c(a,b)}function c(a,b,c){return p=a,q=c,b}function d(a,d){var g=a.peek();if("'"==g||'"'==g)return a.next(),b(a,d,f(g,"string","string"));if("/"==g)return a.next(),a.eat("*")?b(a,d,e):a.eat("/")?(a.skipToEnd(),c("comment","comment")):(a.skipTo(" "),c("operator","operator"));if(/\d/.test(g))return a.match(/^\d*(?:\.\d*)?(?:e[+\-]?\d+)?/),c("number","number");if("#"==g)return a.next(),g=a.peek(),'"'==g?(a.next(),b(a,d,f('"',"symbol","string-2"))):"b"==g?(a.next(),a.eatWhile(/[01]/),c("number","number")):"x"==g?(a.next(),a.eatWhile(/[\da-f]/i),c("number","number")):"o"==g?(a.next(),a.eatWhile(/[0-7]/),c("number","number")):(a.eatWhile(/[-a-zA-Z]/),c("hash","keyword"));if(a.match("end"))return c("end","keyword");for(var h in j)if(j.hasOwnProperty(h)){var l=j[h];if(l instanceof Array&&l.some(function(b){return a.match(b)})||a.match(l))return c(h,k[h],a.current())}return a.match("define")?c("definition","def"):(a.eatWhile(/[\w\-]/),n[a.current()]?c(n[a.current()],o[a.current()],a.current()):a.current().match(i)?c("variable","variable"):(a.next(),c("other","variable-2")))}function e(a,b){for(var e,f=!1;e=a.next();){if("/"==e&&f){b.tokenize=d;break}f="*"==e}return c("comment","comment")}function f(a,b,e){return function(f,g){for(var h,i=!1;null!=(h=f.next());)if(h==a){i=!0;break}return i&&(g.tokenize=d),c(b,e)}}var g={unnamedDefinition:["interface"],namedDefinition:["module","library","macro","C-struct","C-union","C-function","C-callable-wrapper"],typeParameterizedDefinition:["class","C-subtype","C-mapped-subtype"],otherParameterizedDefinition:["method","function","C-variable","C-address"],constantSimpleDefinition:["constant"],variableSimpleDefinition:["variable"],otherSimpleDefinition:["generic","domain","C-pointer-type","table"],statement:["if","block","begin","method","case","for","select","when","unless","until","while","iterate","profiling","dynamic-bind"],separator:["finally","exception","cleanup","else","elseif","afterwards"],other:["above","below","by","from","handler","in","instance","let","local","otherwise","slot","subclass","then","to","keyed-by","virtual"],signalingCalls:["signal","error","cerror","break","check-type","abort"]};g.otherDefinition=g.unnamedDefinition.concat(g.namedDefinition).concat(g.otherParameterizedDefinition),g.definition=g.typeParameterizedDefinition.concat(g.otherDefinition),g.parameterizedDefinition=g.typeParameterizedDefinition.concat(g.otherParameterizedDefinition),g.simpleDefinition=g.constantSimpleDefinition.concat(g.variableSimpleDefinition).concat(g.otherSimpleDefinition),g.keyword=g.statement.concat(g.separator).concat(g.other);var h="[-_a-zA-Z?!*@<>$%]+",i=new RegExp("^"+h),j={symbolKeyword:h+":",symbolClass:"<"+h+">",symbolGlobal:"\\*"+h+"\\*",symbolConstant:"\\$"+h},k={symbolKeyword:"atom",symbolClass:"tag",symbolGlobal:"variable-2",symbolConstant:"variable-3"};for(var l in j)j.hasOwnProperty(l)&&(j[l]=new RegExp("^"+j[l]));j.keyword=[/^with(?:out)?-[-_a-zA-Z?!*@<>$%]+/];var m={};m.keyword="keyword",m.definition="def",m.simpleDefinition="def",m.signalingCalls="builtin";var n={},o={};["keyword","definition","simpleDefinition","signalingCalls"].forEach(function(a){g[a].forEach(function(b){n[b]=a,o[b]=m[a]})});var p,q;return{startState:function(){return{tokenize:d,currentIndent:0}},token:function(a,b){if(a.eatSpace())return null;var c=b.tokenize(a,b);return c},blockCommentStart:"/*",blockCommentEnd:"*/"}}),a.defineMIME("text/x-dylan","dylan")});